
ṩöabout Windows API

API(txt)

 ļ


WinAPI(chm)

 ļ


WinMainܣ

WinMainWindowsڵ㺯Dosڵ㺯mainͬWinMain򷵻ʱWindowsӦóWinMainԭ£

int WINAPI WinMain(  //  :: API = Application Programming Interface -> Ӧñ̽ӿ
HINSTANCE hInstance, // handle to current instance  :: instance -> ʵ
HINSTANCE hPrevInstance, // handle to previous instance  :: previous -> ǰһ
LPSTR lpCmdLine,   // pointer to command line  :: Cmd = command -> 
int nCmdShow     // show state of window
);

úĸЩϵͳWinMainʱݸӦóġ

һhInstanceʾóĵǰеʵͬһӦóͬһϿжʵÿһʵϵͳҪʵһʶţʵϵͳóеWinMainʵݸhInstance

ڶhPrevInstanceʾǰʵһеģͬһӦóʵľǰʵ""ľֵΪNULLʾǰʵǸóеĵһʵǡӡǡϴ󡱡ֵΪNULLֻܱʾǰʵǸóеĵһʵǡӡǡϴ󡱣ǡϼ޴ӵ֪ˡʲôأǵĳֻһʵУͬʱжʵУǿWinMainĿʼּ´ʵ֡

if(hPrevInstance) return 0;  // :: -> if(hPrevInstance!=NULL)

if(hPrevInstance) return 0;ãhPrevInstanceΪNULL0˵ǰеʵǳĵһʵWinMainأСֻҪhPrevInstanceΪNULL˵ѾͬʵУWinMainأǰʵͱֻ֤гһʵС

lpCmdLineһַдݸӦóĲ磺˫Cµ1.txtļʽnotepad.exe򣬴ݸnotepad.exeĲ"c:\1.txt"ӦóҪVCиӦó򴫵ݲѡ˵Project->Settings...,ڵProject SettingsԻѡDebugǩڸñǩҳProgram arguments༭봫ݸӦóĲWinMainڵһжϵ㣬ԵԷʽöϵ㴦ƶlpCmdLineϣڵĻɫСбܹ۲쵽ñֵǵĳУҪõַ鿴ֵ״̬

ĸnCmdShowָĳĴӦʾ󻯣Сصȡ

WinMainǰηWINAPIĽͣʹgoto definitionܣWINAPIʵ__stdcall

////  :: std = standard -> ׼

__stdcall__cdeclֲͬĺϰߣ˲Ĵ˳򡢶ջȡǵϸϢοmsdnڳЩɱAPI⣬API__stdcallϰߡVC++Ĭϵıѡ__cdeclVC++еЩ__stdcallϰߵAPIЩԭʱ__stdcallηԱԸúĵʹ__stdcallϰߡľ飬Delphi(Ĭϵıѡ__stdcall)бдdllеĺVC++бʱɳںԭм__stdcallη⡣صҲ__stdcallϰߣCALLBACKʶģNT4.0򽫱win98win2000ȴû

Winmainĳ밴ܻҪ֣1.ʾڡڴʾûڴϽиֲˣûĲ״̬ı仯ϢʽŵӦóϢС2.ϢѭȡϢϢɷڹ̺ȥϢѭȡһWM_QUITϢʱѭWinMainأСWinMainϢѭ֮ǰأûУֵΪ0Ϣѭ֮󷵻أֵΪWM_QIUTϢwParam


WINAPI APIENTRYFAR PASCAL  calltypedefġԼCALLBACK
